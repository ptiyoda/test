<td>
  {% host_url cluster field func row.val as url %}
  <a href="{{ url }}">{{ row|get_item:func }}</a>
</td>


# templatetags/custom_filters.py
from django import template
from urllib.parse import urlencode
from django.urls import reverse_lazy

register = template.Library()

@register.simple_tag
def host_url(cluster, field, function, value):
    """
    Construit un lien vers la vue 'host_list' avec filtres GET.
    Si function == 'other', ajoute '!' devant la valeur.
    """
    url_base = reverse_lazy("host_list")
    params = {"cluster": cluster}

    if function == "other":
        params[field] = f"!{value}"
    else:
        params[field] = value

    return f"{url_base}?{urlencode(params)}"
