cluster_dict = {"fields": {}}
for field, fdata in data.fields.items():
    value_set = set()
    for func_values in fdata.values.values():
        value_set.update(f.func_values.keys())

    all_values = sorted(value_set, key=int)

    # créer un dict "prêt pour le template"
    prepared_values = {}
    for func, func_values in fdata.values.items():
        prepared_values[func] = {val: func_values.get(val, 0) for val in all_values}

    cluster_dict["fields"][field] = {
        "values": prepared_values,
        "all_values": all_values
    }
